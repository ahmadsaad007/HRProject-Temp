<div class="component-container">
  <h2>Onboarding Page</h2>
  <hr>
  <form
    [formGroup]="form"
    (ngSubmit)="onSubmit(form.value)">
    
      <!-- Name -->
      <div>
        <label for="f_name">First Name*: </label>
        <div>
          <input type="text" name="f_name" id="f_name" formControlName="f_name">
        </div>
        <div *ngIf="f_name.invalid && (f_name.dirty || f_name.touched)" class="alert alert-danger"> 
          <div *ngIf="f_name.errors.required"> First Name is required </div>
        </div>
      </div>
      <div>
        <label for="m_name">Middle Name: </label>
        <div><input type="text" name="m_name" id="m_name" formControlName="m_name"></div>
      </div>
      <div>
        <label for="l_name">Last Name*: </label>
        <div>
          <input type="text" name="l_name" id="l_name" formControlName="l_name">
        </div>
        <div *ngIf="l_name.invalid && (l_name.dirty || l_name.touched)" class="alert alert-danger"> 
          <div *ngIf="l_name.errors.required"> First Name is required </div>
        </div>
      </div>
      <div>
        <label for="p_name">Preferred Name: </label>
        <div><input type="text" name="p_name" id="p_name" formControlName="p_name"></div>
        <!-- <div *ngIf="form.get('name').hasError('pattern')" class="error">
          Name has invalid characters
        </div> -->
      </div>

      <!-- Avatar -->
      <div>
        <label for="avatar">Avatar: </label>
        <div>
          <input type="file" id="avatar" name="avatar" formControlName="avatar" (change)="uploadFile($event)">
          <!-- <input type="submit"> -->
        </div>
      </div>

      <!-- Current Address -->
      <div>
        <label for="currentAddress">Current Address*: </label>
        <div>
          <input type="text" name="currentAddress" id="currentAddress" formControlName="currentAddress">
        </div>
        <div *ngIf="l_name.invalid && (l_name.dirty || l_name.touched)" class="alert alert-danger"> 
          <div *ngIf="l_name.errors.required"> First Name is required </div>
        </div>
      </div>


      <!-- Phone Number -->
      <div>
        <label for="phone">Phone Number*: </label>
        <div>
          <input type="tel" name="phone" id="phone" formControlName="phone">
        </div>
      </div>

      <!-- Car Info -->
      <div>Car Info:
          <div>
            Make: <input type="text" name="carMake" id="carMake" formControlName="carMake">
            Model: <input type="text" name="carModel" id="carModel" formControlName="carModel">
            Color: <input type="text" name="carColor" id="carColor" formControlName="carColor">
          </div>
      </div>

      <!-- Email -->
      <div>
        <label for="email">Email: </label>
        <div>
          <input type="email" name="email" id="email" formControlName='email'>
        </div>
      </div>

      <!-- SSN -->
      <div>
        <label for="ssn">SSN*:</label>
        <div>
          <input type="text" name="ssn" id="ssn" formControlName="ssn">
        </div>
      </div>

      <!-- Date of Birth -->
      <div>
        <label for="dob">D.O.B.*: </label>
        <div>
          <input type="date" name="dob" id="dob" formControlName="dob">
        </div>
      </div>

      <!-- Gender -->
      <div>
        <label for="gender">Gender*: </label>
        <div>
          <select name="gender" id="gender" formControlName="gender">
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Non-binary">Non-binary</option>
            <option value="I don't want to answer">I don't want to answer</option>
          </select>
        </div>
      </div>

      <!-- Citizenship -->
      <div>
        <label>Citizenship Status*: </label>
        
        <input type="radio" formControlName="citizenship" [(ngModel)]="type" value="citizen">Citizen
        <input type="radio" formControlName="citizenship" [(ngModel)]="type" value="green_card">Green Card
        <input type="radio" formControlName="citizenship" [(ngModel)]="type" value="other">Other

        <div *ngIf='type==="other"'>If Other, please provide your Visa Status:
          <div>
            <select name="visa" id="visa" formControlName="visa_status">
              <option value="H1-B">H1-B</option>
              <option value="L2">L2</option>
              <option value="F1">F1(OPT/CPT)</option>
              <option value="H4">H4</option>
              <option value="Other">Other</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Driver License -->
      <div>
        <label>Do you have a driver's license?</label>
        <input type="radio" formControlName="driverLicense" [(ngModel)]="license" value="Yes">Yes
        <input type="radio" formControlName="driverLicense" [(ngModel)]="license" value="No">No

        <div *ngIf='license==="Yes"'>
          License Number: <input type="text" formControlName="licenseNumber">
          Expiration: <input type="date" formControlName="licenseExp">
          <div>
            Image Upload: <input type="file" formControlName ="imageLicense" (change)="uploadFile($event)">
          </div>
        </div>
      </div>

      <!-- Reference -->
      <div formGroupName="referenceForm">If you were referred by an employee, fill out the following details:
        <div>
          <label for="ref_f_name">First Name: </label>
          <input type="text" name="ref_f_name" id="ref_f_name" formControlName="referenceFirstName">
        </div>
        <div>
          <label for="ref_m_name">Middle Name: </label>
          <input type="text" name="ref_m_name" id="ref_m_name" formControlName="referenceMiddleName">
        </div>
        <div>
          <label for="ref_l_name">Last Name: </label>
          <input type="text" name="ref_l_name" id="ref_l_name" formControlName="referenceLastName">
        </div>
      </div>
      <!-- Emergency Contacts -->

      <div formArrayName="emergency">
        <h3>Emergency Contacts: </h3> 
        <a style="cursor: pointer;" (click)="addEmergency()">Add Contact</a>
      
        <div *ngFor="let alias of emergency.controls; let i=index">
          <!-- The repeated emergnecy template -->
          <label>Contact First Name:</label>
          <div><input type="text" [formControlName]="e_firstName"></div>
          
          <label>Contact Last Name:</label>
          <div><input type="text" [formControlName]="e_lastName"></div>
          
          <label>Contact Phone Number:</label>
          <div><input type="tel" [formControlName]="e_phoneNum"></div>
          
          <label>Contact Email:</label>
          <div><input type="email" [formControlName]="e_Email"></div>
         
          <label>Contact Relationship:</label>
          <div><input type="text" [formControlName]="e_Relationship"></div>
          
        </div>
      </div>

      <!-- Form Submit Button -->
      <div>
        <button class='submit' type="submit" [disabled]="!form.valid">Save</button>
      </div>
  </form>
</div>